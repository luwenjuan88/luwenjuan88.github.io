<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.12.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="微信: 13246411679">
<meta property="og:type" content="website">
<meta property="og:title" content="卢文娟">
<meta property="og:url" content="http://example.com/page/8/index.html">
<meta property="og:site_name" content="卢文娟">
<meta property="og:description" content="微信: 13246411679">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="卢文娟">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/8/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/8/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>卢文娟</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">卢文娟</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">元宇宙，区块链，币圈知识分享，关注我公众号：元宇宙探索之旅</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-每日任务"><a href="/dailytask/" rel="section"><i class="fa fa-calendar fa-fw"></i>每日任务</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="卢文娟"
      src="/images/luwenjuan.jpeg">
  <p class="site-author-name" itemprop="name">卢文娟</p>
  <div class="site-description" itemprop="description">微信: 13246411679</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">91</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%887%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/luwenjuan.jpeg">
      <meta itemprop="name" content="卢文娟">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="卢文娟">
      <meta itemprop="description" content="微信: 13246411679">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 卢文娟">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%887%EF%BC%89/" class="post-title-link" itemprop="url">智能合约项目从0到1：实现向智能合约发送消息（七）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 15:21:41" itemprop="dateCreated datePublished" datetime="2022-07-02T15:21:41+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-25 18:20:36" itemprop="dateModified" datetime="2022-08-25T18:20:36+08:00">2022-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/" itemprop="url" rel="index"><span itemprop="name">智能合约</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    <a title="智能合约项目从0到1：实现向智能合约发送消息（七）" href="/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%887%EF%BC%89/#SOHUCS" itemprop="discussionUrl">
      <span id="sourceId::995647e2e98cb2e3507218712d7e28ee" class="cy_cmt_count" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="修改合约功能"><a href="#修改合约功能" class="headerlink" title="修改合约功能"></a>修改合约功能</h2><p>这里，我们最终是希望做到让用户可以给我们发送消息，而且我们可以显示所有过去用户发送给我们的消息。</p>
<p>所以我们要做三件事：</p>
<blockquote>
<p>让用户打招呼的同时，提交他们的消息</p>
<p>把用户发送过来的消息保存在区块链</p>
<p>在网站上显示所有数据</p>
</blockquote>
<p>这是修改后的智能合约代码：</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: UNLICENSED</span></span><br><span class="line"></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.0</span>;</span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;hardhat/console.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract WavePortal &#123;</span><br><span class="line">    uint256 totalWaves;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * A little magic, Google what events are in Solidity!</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    event NewWave(address indexed from, uint256 <span class="built_in">timestamp</span>, string message);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * I created a struct here named Wave.</span></span><br><span class="line"><span class="comment">     * A struct is basically a custom datatype where we can customize what we want to hold inside it.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    struct Wave &#123;</span><br><span class="line">        address waver; <span class="comment">// The address of the user who waved.</span></span><br><span class="line">        string message; <span class="comment">// The message the user sent.</span></span><br><span class="line">        uint256 <span class="built_in">timestamp</span>; <span class="comment">// The timestamp when the user waved.</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * I declare a variable waves that lets me store an array of structs.</span></span><br><span class="line"><span class="comment">     * This is what lets me hold all the waves anyone ever sends to me!</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Wave[] waves;</span><br><span class="line"></span><br><span class="line">    constructor() &#123;</span><br><span class="line">        <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&quot;I AM SMART CONTRACT. POG.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * You&#x27;ll notice I changed the wave function a little here as well and</span></span><br><span class="line"><span class="comment">     * now it requires a string called _message. This is the message our user</span></span><br><span class="line"><span class="comment">     * sends us from the frontend!</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">wave</span>(<span class="params">string memory _message</span>) <span class="title function_">public</span> &#123;</span><br><span class="line">        totalWaves += <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&quot;%s waved w/ message %s&quot;</span>, msg.sender, _message);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * This is where I actually store the wave data in the array.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        waves.<span class="built_in">push</span>(Wave(msg.sender, _message, block.<span class="built_in">timestamp</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * I added some fanciness here, Google it and try to figure out what it is!</span></span><br><span class="line"><span class="comment">         * Let me know what you learn in #general-chill-chat</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        emit NewWave(msg.sender, block.<span class="built_in">timestamp</span>, _message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * I added a function getAllWaves which will return the struct array, waves, to us.</span></span><br><span class="line"><span class="comment">     * This will make it easy to retrieve the waves from our website!</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getAllWaves</span>(<span class="params"></span>) <span class="title function_">public</span> <span class="title function_">view</span> <span class="title function_">returns</span> (<span class="params">Wave[] memory</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> waves;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getTotalWaves</span>(<span class="params"></span>) <span class="title function_">public</span> <span class="title function_">view</span> <span class="title function_">returns</span> (<span class="params">uint256</span>) &#123;</span><br><span class="line">        <span class="comment">// Optional: Add this line if you want to see the contract print the value!</span></span><br><span class="line">        <span class="comment">// We&#x27;ll also print it over in run.js as well.</span></span><br><span class="line">        <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&quot;We have %d total waves!&quot;</span>, totalWaves);</span><br><span class="line">        <span class="keyword">return</span> totalWaves;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>struct Wave {<br>        address waver;<br>        string message;<br>        uint256 timestamp;<br>  }</p>
</blockquote>
<p>这里我们定义了一个结构体来保存用户发过来的消息，waver是打招呼的地址，message是这个地址发过来的消息，timestamp是发消息的时间。</p>
<blockquote>
<p>event NewWave(address indexed from, uint256 timestamp, string message);</p>
</blockquote>
<p>另外我们还定义了一个事件，当我们打招呼处理完之后，就调用这个事件。</p>
<p>在我们每次修改完智能合约之后，我们都要用run.js测试一下功能，所以我们修改一下run.js的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">main</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> waveContractFactory = <span class="keyword">await</span> hre.<span class="property">ethers</span>.<span class="title function_">getContractFactory</span>(<span class="string">&quot;WavePortal&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> waveContract = <span class="keyword">await</span> waveContractFactory.<span class="title function_">deploy</span>();</span><br><span class="line">  <span class="keyword">await</span> waveContract.<span class="title function_">deployed</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Contract addy:&quot;</span>, waveContract.<span class="property">address</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> waveCount;</span><br><span class="line">  waveCount = <span class="keyword">await</span> waveContract.<span class="title function_">getTotalWaves</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(waveCount.<span class="title function_">toNumber</span>());</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Let&#x27;s send a few waves!</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">let</span> waveTxn = <span class="keyword">await</span> waveContract.<span class="title function_">wave</span>(<span class="string">&quot;A message!&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> waveTxn.<span class="title function_">wait</span>(); <span class="comment">// Wait for the transaction to be mined</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [_, randomPerson] = <span class="keyword">await</span> hre.<span class="property">ethers</span>.<span class="title function_">getSigners</span>();</span><br><span class="line">  waveTxn = <span class="keyword">await</span> waveContract.<span class="title function_">connect</span>(randomPerson).<span class="title function_">wave</span>(<span class="string">&quot;Another message!&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> waveTxn.<span class="title function_">wait</span>(); <span class="comment">// Wait for the transaction to be mined</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> allWaves = <span class="keyword">await</span> waveContract.<span class="title function_">getAllWaves</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(allWaves);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">runMain</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">main</span>();</span><br><span class="line">    process.<span class="title function_">exit</span>(<span class="number">0</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    process.<span class="title function_">exit</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">runMain</span>();</span><br></pre></td></tr></table></figure>

<p>我们先在本地测试功能，我们在终端运行命令：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx hardhat <span class="built_in">run</span> scripts/<span class="built_in">run</span>.js</span><br></pre></td></tr></table></figure>

<p>这是运行结果，我们可以看到打印出来的内容，一共有两个消息，timestamp是bignumber的类型。<br><img src="http://luwenjuan.luyuedan.com/mweb/16536534304836.png"></p>
<p>功能测试没有问题，那么我们的智能合约已经修改，就要重新再次部署到区块链上。</p>
<h2 id="重新部署合约"><a href="#重新部署合约" class="headerlink" title="重新部署合约"></a>重新部署合约</h2><p>在我们每次修改完智能合约后，我们需要做三件事：</p>
<blockquote>
<p>重新部署，记下新的合约地址</p>
<p>在网页端修改合约地址</p>
<p>在网页端修改abi文件</p>
</blockquote>
<p>为什么要做这三件事呢？因为智能合约是不可变的，这也意味着更改合约就需要重新部署，所有变量都是重置的，它会成为一个全新的合约，也就是说，修改了合约代码，所有的wave数据也会改变。</p>
<p>所以说，这里我们做三件事：</p>
<blockquote>
<p>重新部署：npx hardhat run scripts&#x2F;deploy.js –network rinkeby</p>
<p>修改App.js的contractAddress字段</p>
<p>把artifacts文件夹里的abi内容复制到前端</p>
</blockquote>
<p>那么我们重新做一遍：</p>
<p>运行命令：<br><img src="http://luwenjuan.luyuedan.com/mweb/16536539575898.png"></p>
<p>记下adress：0xb3E8260eDaF2D91034314e4b1C551047dc5Dfac0</p>
<p>修改adress：<br><img src="http://luwenjuan.luyuedan.com/mweb/16536540486397.png"></p>
<p>修改abi：<br><img src="http://luwenjuan.luyuedan.com/mweb/16536542904664.png"></p>
<h2 id="修改前端代码"><a href="#修改前端代码" class="headerlink" title="修改前端代码"></a>修改前端代码</h2><p>现在智能合约已经修改，现在只需要修改前端就行。</p>
<p>在app.js添加一个函数getAllWaves：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [currentAccount, setCurrentAccount] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * All state property to store all waves</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> [allWaves, setAllWaves] = <span class="title function_">useState</span>([]);</span><br><span class="line">  <span class="keyword">const</span> contractAddress = <span class="string">&quot;0xb3E8260eDaF2D91034314e4b1C551047dc5Dfac0&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * Create a method that gets all waves from your contract</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getAllWaves</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; ethereum &#125; = <span class="variable language_">window</span>;</span><br><span class="line">      <span class="keyword">if</span> (ethereum) &#123;</span><br><span class="line">        <span class="keyword">const</span> provider = <span class="keyword">new</span> ethers.<span class="property">providers</span>.<span class="title class_">Web3Provider</span>(ethereum);</span><br><span class="line">        <span class="keyword">const</span> signer = provider.<span class="title function_">getSigner</span>();</span><br><span class="line">        <span class="keyword">const</span> wavePortalContract = <span class="keyword">new</span> ethers.<span class="title class_">Contract</span>(contractAddress, contractABI, signer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * Call the getAllWaves method from your Smart Contract</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">const</span> waves = <span class="keyword">await</span> wavePortalContract.<span class="title function_">getAllWaves</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * We only need address, timestamp, and message in our UI so let&#x27;s</span></span><br><span class="line"><span class="comment">         * pick those out</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">let</span> wavesCleaned = [];</span><br><span class="line">        waves.<span class="title function_">forEach</span>(<span class="function"><span class="params">wave</span> =&gt;</span> &#123;</span><br><span class="line">          wavesCleaned.<span class="title function_">push</span>(&#123;</span><br><span class="line">            <span class="attr">address</span>: wave.<span class="property">waver</span>,</span><br><span class="line">            <span class="attr">timestamp</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(wave.<span class="property">timestamp</span> * <span class="number">1000</span>),</span><br><span class="line">            <span class="attr">message</span>: wave.<span class="property">message</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * Store our data in React State</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="title function_">setAllWaves</span>(wavesCleaned);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Ethereum object doesn&#x27;t exist!&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>当我们确定用户已经链接上了钱包，我们就调用这个函数getAllWaves，因为我们不管调用任何函数都需要一个地址。</p>
<p>所以我们在这里调用：</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16536555520309.png"></p>
<p>接下来我们要更新html的代码：</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">return (</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;mainContainer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;dataContainer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          👋 Hey there!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;bio&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          I am farza and I worked on self-driving cars so that&#x27;s pretty cool right? Connect your Ethereum wallet and wave at me!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;waveButton&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;wave&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Wave at Me</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        &#123;!currentAccount &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;waveButton&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;connectWallet&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            Connect Wallet</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        &#123;allWaves.map((wave, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          return (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span> <span class="attr">style</span>=</span></span><span class="template-variable">&#123;&#123; <span class="name">backgroundColor:</span> <span class="string">&quot;OldLace&quot;</span>, marginTop: <span class="string">&quot;16px&quot;</span>, padding: <span class="string">&quot;8px&quot;</span> &#125;&#125;</span><span class="language-xml"><span class="tag">&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">div</span>&gt;</span>Address: &#123;wave.address&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">div</span>&gt;</span>Time: &#123;wave.timestamp.toString()&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">div</span>&gt;</span>Message: &#123;wave.message&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span>)</span></span><br><span class="line"><span class="language-xml">        &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  );</span></span><br></pre></td></tr></table></figure>

<p>这里，我们遍历allwaves，然后对于每一个wave，创建一个新的div来在屏幕展示。</p>
<p>最后，我们要注意，这次的wave函数需要带一个参数，因为我们每次打招呼，还需要发一个消息。</p>
<p>所以我们在界面上加一个文本框，输入我们想发的消息，点击wave的按钮，调用wave函数发送消息。</p>
<p>要怎么实现呢？<br><img src="http://luwenjuan.luyuedan.com/mweb/16536601133834.png"></p>
<p>我们在wave按钮上方增加一个文本输入框。</p>
<p>然后在wave函数中，获取这个文本框的内容，并传给wave函数：</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16536601685418.png"></p>
<p>我们看一下效果：</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16536601960650.png"></p>
<p>这里展示了过去发送的消息。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%886%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/luwenjuan.jpeg">
      <meta itemprop="name" content="卢文娟">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="卢文娟">
      <meta itemprop="description" content="微信: 13246411679">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 卢文娟">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%886%EF%BC%89/" class="post-title-link" itemprop="url">智能合约项目从0到1：从网站调用区块链合约（六）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 15:21:41" itemprop="dateCreated datePublished" datetime="2022-07-02T15:21:41+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-25 18:16:39" itemprop="dateModified" datetime="2022-08-25T18:16:39+08:00">2022-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/" itemprop="url" rel="index"><span itemprop="name">智能合约</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    <a title="智能合约项目从0到1：从网站调用区块链合约（六）" href="/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%886%EF%BC%89/#SOHUCS" itemprop="discussionUrl">
      <span id="sourceId::c94ee427869015038d22f39c8d4c948d" class="cy_cmt_count" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="从网站调用智能合约"><a href="#从网站调用智能合约" class="headerlink" title="从网站调用智能合约"></a>从网站调用智能合约</h2><p>在App.jsx中增加一个函数，来调用智能合约。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">wave</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; ethereum &#125; = <span class="variable language_">window</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (ethereum) &#123;</span><br><span class="line">        <span class="keyword">const</span> provider = <span class="keyword">new</span> ethers.<span class="property">providers</span>.<span class="title class_">Web3Provider</span>(ethereum);</span><br><span class="line">        <span class="keyword">const</span> signer = provider.<span class="title function_">getSigner</span>();</span><br><span class="line">        <span class="keyword">const</span> wavePortalContract = <span class="keyword">new</span> ethers.<span class="title class_">Contract</span>(contractAddress, contractABI, signer);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> count = <span class="keyword">await</span> wavePortalContract.<span class="title function_">getTotalWaves</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Retrieved total wave count...&quot;</span>, count.<span class="title function_">toNumber</span>());</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Ethereum object doesn&#x27;t exist!&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里解释一下：</p>
<blockquote>
<p>const provider &#x3D; new ethers.providers.Web3Provider(ethereum);</p>
<p>const signer &#x3D; provider.getSigner();</p>
</blockquote>
<p>ethers是帮我们和智能合约对话的库，在代码前面，记得加上import { ethers } from “ethers”;导入这个库。</p>
<p>这里生成了一个provider，provider是用来和部署在以太坊节点上的智能合约通信的模块。</p>
<p>修改按钮的值，当我们点击wave at me 按钮的时候，调用这个函数：<br><img src="http://luwenjuan.luyuedan.com/mweb/16533053593077.png"></p>
<h2 id="设置地址和ABI"><a href="#设置地址和ABI" class="headerlink" title="设置地址和ABI"></a>设置地址和ABI</h2><p>这里还需要两个东西：</p>
<p>contractAddress<br>contractABI</p>
<p>contractAddress是什么？在之前部署Rinkby测试网络的时候，有一个contract地址，我们记下了WavePortal Adress，就是这个：0xc850155CB95A1a73e9a1FA4ca0cF96089112b744</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16531421564979.png"></p>
<p>我们要和节点通信，自然要获取到节点的地址，所以我们设置一个变量加入App.jsx文件中。</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const contractAddress <span class="operator">=</span> <span class="string">&quot;0xc850155CB95A1a73e9a1FA4ca0cF96089112b744&quot;</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>ABI（合约应用二进制接口）是在以太坊生态系统中与合约交互的标准方式，这个规范规定了网站应该怎样和智能合约通信。</p>
<p>我们之前在编译智能合约的时候，有一个文件夹是artifacts，这个文件夹是编译时生成的一系列文件，contractABI就是artifacts的一个json文件WavePortal.json。</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16533062683524.png"></p>
<p>在src文件夹下新建一个utils文件夹，我们把这个json文件复制到这个文件夹里。</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16533065720349.png"></p>
<p>接下来我们就在App.jsx里面引用这个文件：</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ethers &#125; <span class="keyword">from</span> <span class="string">&quot;ethers&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> abi <span class="keyword">from</span> <span class="string">&quot;./utils/WavePortal.json&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [currentAccount, setCurrentAccount] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> contractAddress = <span class="string">&quot;0xd5f08a0ae197482FA808cE84E00E97d940dBD26E&quot;</span>;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Create a variable here that references the abi content!</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> contractABI = abi.abi;</span><br></pre></td></tr></table></figure>
<p>我们再看wave函数后面几行：</p>
<blockquote>
<p>const wavePortalContract &#x3D; new ethers.Contract(contractAddress, contractABI, signer);</p>
<p>let count &#x3D; await wavePortalContract.getTotalWaves();</p>
</blockquote>
<p>在获取signer之后，通过abi连接以太坊节点，来调用智能合约函数。</p>
<h2 id="向智能合约写数据"><a href="#向智能合约写数据" class="headerlink" title="向智能合约写数据"></a>向智能合约写数据</h2><p>写数据和读数据的区别在于，写数据的时候，我们要通知矿工我们要修改了数据，这样矿工才能操作挖矿，这个数据就能被修改，因为别人干活了，所以我们要付挖矿的燃油费；</p>
<p>而读数据我们不需要这一步，所以读数据都是免费的。</p>
<p>我们修改wave函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">wave</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; ethereum &#125; = <span class="variable language_">window</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (ethereum) &#123;</span><br><span class="line">        <span class="keyword">const</span> provider = <span class="keyword">new</span> ethers.<span class="property">providers</span>.<span class="title class_">Web3Provider</span>(ethereum);</span><br><span class="line">        <span class="keyword">const</span> signer = provider.<span class="title function_">getSigner</span>();</span><br><span class="line">        <span class="keyword">const</span> wavePortalContract = <span class="keyword">new</span> ethers.<span class="title class_">Contract</span>(contractAddress, contractABI, signer);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> count = <span class="keyword">await</span> wavePortalContract.<span class="title function_">getTotalWaves</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Retrieved total wave count...&quot;</span>, count.<span class="title function_">toNumber</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * Execute the actual wave from your smart contract</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">const</span> waveTxn = <span class="keyword">await</span> wavePortalContract.<span class="title function_">wave</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Mining...&quot;</span>, waveTxn.<span class="property">hash</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">await</span> waveTxn.<span class="title function_">wait</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Mined -- &quot;</span>, waveTxn.<span class="property">hash</span>);</span><br><span class="line"></span><br><span class="line">        count = <span class="keyword">await</span> wavePortalContract.<span class="title function_">getTotalWaves</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Retrieved total wave count...&quot;</span>, count.<span class="title function_">toNumber</span>());</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Ethereum object doesn&#x27;t exist!&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>这里，我们调用wave函数，其实就是写数据的函数，所以我们有等待挖矿的操作，当我们运行的时候，小狐狸钱包也会提醒我们支付gas费，一切都是按照正常的来操作。</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/IMG_9607.GIF" alt="IMG_9607"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%888%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/luwenjuan.jpeg">
      <meta itemprop="name" content="卢文娟">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="卢文娟">
      <meta itemprop="description" content="微信: 13246411679">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 卢文娟">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%888%EF%BC%89/" class="post-title-link" itemprop="url">智能合约项目从0到1：给用户发以太币（八）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 15:21:41" itemprop="dateCreated datePublished" datetime="2022-07-02T15:21:41+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-25 18:32:42" itemprop="dateModified" datetime="2022-08-25T18:32:42+08:00">2022-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/" itemprop="url" rel="index"><span itemprop="name">智能合约</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    <a title="智能合约项目从0到1：给用户发以太币（八）" href="/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%888%EF%BC%89/#SOHUCS" itemprop="discussionUrl">
      <span id="sourceId::f6591b35eb659c92e9dd3311655d3f9e" class="cy_cmt_count" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="给用户发以太币"><a href="#给用户发以太币" class="headerlink" title="给用户发以太币"></a>给用户发以太币</h2><p>向用户发送以太币是智能合约的一个重要功能，现在，我们可以实现一个功能，给向我们打招呼的用户钱包投以太币。</p>
<p>我们先给每个用户直接发送0.0001ETH，这里修改WavePortal.sol里面的wave函数：</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">wave</span>(<span class="params">string memory _message</span>) <span class="title function_">public</span> &#123;</span><br><span class="line">    totalWaves += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&quot;%s has waved!&quot;</span>, msg.sender);</span><br><span class="line"></span><br><span class="line">    waves.<span class="built_in">push</span>(Wave(msg.sender, _message, block.<span class="built_in">timestamp</span>));</span><br><span class="line"></span><br><span class="line">    emit NewWave(msg.sender, block.<span class="built_in">timestamp</span>, _message);</span><br><span class="line"></span><br><span class="line">    uint256 prizeAmount = <span class="number">0.0001</span> ether;</span><br><span class="line">    require(</span><br><span class="line">        prizeAmount &lt;= address(this).balance,</span><br><span class="line">        <span class="string">&quot;Trying to withdraw more money than the contract has.&quot;</span></span><br><span class="line">    );</span><br><span class="line">    (bool success, ) = (msg.sender).call&#123;<span class="attr">value</span>: prizeAmount&#125;(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    require(success, <span class="string">&quot;Failed to withdraw money from contract.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>uint256 prizeAmount &#x3D; 0.0001 ether;</p>
</blockquote>
<p>这里prizeAmount我们声明了一个价格，Solidity运行我们直接使用ether表示金融单位。</p>
<blockquote>
<p>require(<br>            prizeAmount &lt;&#x3D; address(this).balance,<br>            “Trying to withdraw more money than the contract has.”<br>        );</p>
</blockquote>
<p>这个require会检查条件是否为真，如果不为真的话，就会直接退出函数。</p>
<p>这里价差是否我们设置的数量是小于等于钱包的钱，因为之后小于等于钱包的钱，我们才能给用户发这么多钱。</p>
<blockquote>
<p>(msg.sender).call{value: prizeAmount}(“”)</p>
</blockquote>
<p>这句代码就是发送钱。</p>
<p>除此以外，我们还需要修改constructor函数，增加关键字payable：</p>
<blockquote>
<p>constructor() payable {<br>    console.log(“We have been constructed!”);<br>  }</p>
</blockquote>
<p>payable关键词用来修饰结构函数，代表我们的智能合约是可以有支付功能的，否则默认是不具备支付功能的智能合约。</p>
<p>不过现在这个函数应该无法执行，因为我们的智能合约钱包没有钱。</p>
<h2 id="给我们的智能合约充钱"><a href="#给我们的智能合约充钱" class="headerlink" title="给我们的智能合约充钱"></a>给我们的智能合约充钱</h2><p>修改run.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">main</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> waveContractFactory = <span class="keyword">await</span> hre.<span class="property">ethers</span>.<span class="title function_">getContractFactory</span>(<span class="string">&quot;WavePortal&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> waveContract = <span class="keyword">await</span> waveContractFactory.<span class="title function_">deploy</span>(&#123;</span><br><span class="line">    <span class="attr">value</span>: hre.<span class="property">ethers</span>.<span class="property">utils</span>.<span class="title function_">parseEther</span>(<span class="string">&quot;0.1&quot;</span>),</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">await</span> waveContract.<span class="title function_">deployed</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Contract addy:&quot;</span>, waveContract.<span class="property">address</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * Get Contract balance</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">let</span> contractBalance = <span class="keyword">await</span> hre.<span class="property">ethers</span>.<span class="property">provider</span>.<span class="title function_">getBalance</span>(</span><br><span class="line">    waveContract.<span class="property">address</span></span><br><span class="line">  );</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">    <span class="string">&quot;Contract balance:&quot;</span>,</span><br><span class="line">    hre.<span class="property">ethers</span>.<span class="property">utils</span>.<span class="title function_">formatEther</span>(contractBalance)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * Send Wave</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">let</span> waveTxn = <span class="keyword">await</span> waveContract.<span class="title function_">wave</span>(<span class="string">&quot;A message!&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> waveTxn.<span class="title function_">wait</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * Get Contract balance to see what happened!</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  contractBalance = <span class="keyword">await</span> hre.<span class="property">ethers</span>.<span class="property">provider</span>.<span class="title function_">getBalance</span>(waveContract.<span class="property">address</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">    <span class="string">&quot;Contract balance:&quot;</span>,</span><br><span class="line">    hre.<span class="property">ethers</span>.<span class="property">utils</span>.<span class="title function_">formatEther</span>(contractBalance)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> allWaves = <span class="keyword">await</span> waveContract.<span class="title function_">getAllWaves</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(allWaves);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">runMain</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">main</span>();</span><br><span class="line">    process.<span class="title function_">exit</span>(<span class="number">0</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    process.<span class="title function_">exit</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">runMain</span>();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>hre.ethers.utils.parseEther(“0.1”)</p>
</blockquote>
<p>这句代码的意思就是，部署智能合约的时候，给他冲0.1ETH，这会从我的钱包里面扣除，并用来给智能合约充钱。</p>
<blockquote>
<p>let contractBalance &#x3D; await hre.ethers.provider.getBalance(waveContract.address);</p>
<p>hre.ethers.utils.formatEther(contractBalance)</p>
</blockquote>
<p>这句代码测试我的智能合约是否真的有0.1ETH的钱，后续我们wave之后再次打印，测试是否扣除了0.0001ETH的钱。</p>
<p>好了，运行试试看：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx hardhat <span class="built_in">run</span> scripts/<span class="built_in">run</span>.js</span><br></pre></td></tr></table></figure>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16537096294314.png"></p>
<p>在运行前是0.1ETH，运行后是0.0999ETH，说明发钱成功。</p>
<p>因为要修改部署条件，所以我们要修改deploy.js：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const main = async () =&gt; &#123;</span><br><span class="line">  const waveContractFactory = await hre.ethers.getContractFactory(<span class="string">&quot;WavePortal&quot;</span>);</span><br><span class="line">  const waveContract = await waveContractFactory.deploy(&#123;</span><br><span class="line">    value: hre.ethers.utils.parseEther(<span class="string">&quot;0.001&quot;</span>),</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  await waveContract.deployed();</span><br><span class="line"></span><br><span class="line">  console.log(<span class="string">&quot;WavePortal address: &quot;</span>, waveContract.address);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const runMain = async () =&gt; &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    await main();</span><br><span class="line">    process.<span class="keyword">exit</span>(<span class="number">0</span>);</span><br><span class="line">  &#125; catch (error) &#123;</span><br><span class="line">    console.error(error);</span><br><span class="line">    process.<span class="keyword">exit</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">runMain();</span><br></pre></td></tr></table></figure>

<p>所以，我们再次部署智能合约到区块链：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx hardhat <span class="built_in">run</span> scripts/deploy.js <span class="comment">--network rinkeby</span></span><br></pre></td></tr></table></figure>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16537099097739.png"></p>
<p>我们再次三步走：</p>
<blockquote>
<p>重新部署，记下新的合约地址</p>
<p>在网页端修改合约地址</p>
<p>在网页端修改abi文件</p>
</blockquote>
<p>现在，我的钱包在打招呼前有0.094ETH:</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16537100975938.png"></p>
<p>打招呼的燃料费：0.00019ETH<br><img src="http://luwenjuan.luyuedan.com/mweb/16537102492282.png"></p>
<p>打招呼后还有0.0939ETH，收到了智能合约发来的0.0001ETH的钱。<br><img src="http://luwenjuan.luyuedan.com/mweb/16537102652742.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%885%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/luwenjuan.jpeg">
      <meta itemprop="name" content="卢文娟">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="卢文娟">
      <meta itemprop="description" content="微信: 13246411679">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 卢文娟">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%885%EF%BC%89/" class="post-title-link" itemprop="url">智能合约项目从0到1：客户端网站连接小狐狸钱包（五）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 15:21:41" itemprop="dateCreated datePublished" datetime="2022-07-02T15:21:41+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-25 18:11:57" itemprop="dateModified" datetime="2022-08-25T18:11:57+08:00">2022-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/" itemprop="url" rel="index"><span itemprop="name">智能合约</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    <a title="智能合约项目从0到1：客户端网站连接小狐狸钱包（五）" href="/2022/07/02/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%885%EF%BC%89/#SOHUCS" itemprop="discussionUrl">
      <span id="sourceId::7d78fe0add17d96446aa96b54e77365e" class="cy_cmt_count" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>我们的智能合约已经成功部署到了区块链上，那么接下来就是我们如何通过客户端来访问区块链服务了。</p>
<h2 id="使用Replit开发客户端"><a href="#使用Replit开发客户端" class="headerlink" title="使用Replit开发客户端"></a>使用Replit开发客户端</h2><p>我们使用Replit来开发客户端，Replit是一个基于浏览器的IDE，我们可以方便的使用它来构建我们的web app，并部署到浏览器。</p>
<p>我们需要先注册Replit账号，链接：<a target="_blank" rel="noopener" href="https://replit.com/login?goto=/">https://replit.com/login?goto=%2F</a>~</p>
<p>然后我们可以使用一个现成的框架：<a target="_blank" rel="noopener" href="https://replit.com/@adilanchian/waveportal-starter-project?v=1">https://replit.com/@adilanchian/waveportal-starter-project?v=1</a></p>
<p>点击左上角的Fork repl，可以把这个项目放入自己的空间，并进行进一步的开发。</p>
<p>就是这样子了，加载完毕之后，点击右上角的绿色按钮run，就可以运行了，这时我们对代码的改动，会实时反应到网页上，这里我已经点击了run，所以按钮变成了stop。</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16531277423829.png"></p>
<p>接下来，为了让我们的网站连接到区块链，我们需要连接钱包，因为只有当网站连接钱包之后，才能够允许调用智能合约。</p>
<h2 id="检查钱包是否登陆"><a href="#检查钱包是否登陆" class="headerlink" title="检查钱包是否登陆"></a>检查钱包是否登陆</h2><p>如果我们登陆了小狐狸钱包，它将会自动在窗口产生一个对象ethereum，通过检查这个对象，我们可以检查钱包状态。</p>
<p>在前端代码中，找到src的App.jsx文件，添加这些代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">checkIfWalletIsConnected</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * First make sure we have access to window.ethereum</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">const</span> &#123; ethereum &#125; = <span class="variable language_">window</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!ethereum) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Make sure you have metamask!&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;We have the ethereum object&quot;</span>, ethereum);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  * This runs our function when the page loads.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">checkIfWalletIsConnected</span>();</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;mainContainer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;dataContainer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        👋 Hey there!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;bio&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          I am farza and I worked on self-driving cars so that&#x27;s pretty cool right? Connect your Ethereum wallet and wave at me!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;waveButton&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;null&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Wave at Me</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>

<p>checkIfWalletIsConnected是一个检查勤包的函数，当网页加载的时候，这个函数会被运行。</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16532880093047.png"></p>
<p>我的钱包一直是登陆状态，所以显示我有这个ethereum对象。</p>
<h2 id="检查钱包是否被我们的网站授权"><a href="#检查钱包是否被我们的网站授权" class="headerlink" title="检查钱包是否被我们的网站授权"></a>检查钱包是否被我们的网站授权</h2><p>接下来，我们就要检查能否连接到钱包，因为网站要连接钱包，是要经过我们的授权的。</p>
<p>我们修改App.jsx文件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  * Just a state variable we use to store our user&#x27;s public wallet.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">const</span> [currentAccount, setCurrentAccount] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">checkIfWalletIsConnected</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; ethereum &#125; = <span class="variable language_">window</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!ethereum) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Make sure you have metamask!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;We have the ethereum object&quot;</span>, ethereum);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">      * Check if we&#x27;re authorized to access the user&#x27;s wallet</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      <span class="keyword">const</span> accounts = <span class="keyword">await</span> ethereum.<span class="title function_">request</span>(&#123; <span class="attr">method</span>: <span class="string">&quot;eth_accounts&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (accounts.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> account = accounts[<span class="number">0</span>];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Found an authorized account:&quot;</span>, account);</span><br><span class="line">        <span class="title function_">setCurrentAccount</span>(account)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;No authorized account found&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">checkIfWalletIsConnected</span>();</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;mainContainer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;dataContainer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          👋 Hey there!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;bio&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          I am farza and I worked on self-driving cars so that&#x27;s pretty cool right? Connect your Ethereum wallet and wave at me!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;waveButton&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;null&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Wave at Me</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>const accounts &#x3D; await ethereum.request({ method: “eth_accounts” });</p>
</blockquote>
<p>这一句获取已有的钱包账号列表。</p>
<p>如果是第一次连接，那么我们的网站肯定是没有被钱包授权的，所以结果显示：</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16532885038365.png"></p>
<h2 id="授权网站连接钱包"><a href="#授权网站连接钱包" class="headerlink" title="授权网站连接钱包"></a>授权网站连接钱包</h2><p>我们在网站放一个连接钱包的按钮，当我们按下按钮时，网站请求连接钱包。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [currentAccount, setCurrentAccount] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">checkIfWalletIsConnected</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; ethereum &#125; = <span class="variable language_">window</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!ethereum) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Make sure you have metamask!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;We have the ethereum object&quot;</span>, ethereum);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> accounts = <span class="keyword">await</span> ethereum.<span class="title function_">request</span>(&#123; <span class="attr">method</span>: <span class="string">&quot;eth_accounts&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (accounts.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> account = accounts[<span class="number">0</span>];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Found an authorized account:&quot;</span>, account);</span><br><span class="line">        <span class="title function_">setCurrentAccount</span>(account);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;No authorized account found&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Implement your connectWallet method here</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">connectWallet</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; ethereum &#125; = <span class="variable language_">window</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!ethereum) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;Get MetaMask!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> accounts = <span class="keyword">await</span> ethereum.<span class="title function_">request</span>(&#123; <span class="attr">method</span>: <span class="string">&quot;eth_requestAccounts&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Connected&quot;</span>, accounts[<span class="number">0</span>]);</span><br><span class="line">      <span class="title function_">setCurrentAccount</span>(accounts[<span class="number">0</span>]);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">checkIfWalletIsConnected</span>();</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;mainContainer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;dataContainer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        👋 Hey there!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;bio&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          I am farza and I worked on self-driving cars so that&#x27;s pretty cool right? Connect your Ethereum wallet and wave at me!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;waveButton&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;null&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Wave at Me</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        &#123;/*</span></span><br><span class="line"><span class="language-xml">        * If there is no currentAccount render this button</span></span><br><span class="line"><span class="language-xml">        */&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;!currentAccount &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;waveButton&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;connectWallet&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            Connect Wallet</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>const accounts &#x3D; await ethereum.request({ method: “eth_requestAccounts” });</p>
</blockquote>
<p>我们定义了connectWallet函数连接钱包，这一句代码请求连接我们的钱包账号。</p>
<p>当我们的网站没有被钱包授权时，会显示这个按钮Connect Wallet，否则这个按钮不会显示，当我们点击网页的按钮时，就会调用连接钱包的函数。</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16532890444849.png"></p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16532896608291.png"></p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16614222661429.png"></p>
<p>好了，连接到小狐狸钱包，connect wallnet的按钮消失了。</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16532897432800.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M1-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%85%83%E5%AE%87%E5%AE%99%E5%9C%A8%E5%88%9D%E6%9C%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/luwenjuan.jpeg">
      <meta itemprop="name" content="卢文娟">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="卢文娟">
      <meta itemprop="description" content="微信: 13246411679">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 卢文娟">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M1-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%85%83%E5%AE%87%E5%AE%99%E5%9C%A8%E5%88%9D%E6%9C%9F/" class="post-title-link" itemprop="url">元宇宙初探：为什么元宇宙还在初期？</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 15:21:41" itemprop="dateCreated datePublished" datetime="2022-07-02T15:21:41+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-29 14:50:27" itemprop="dateModified" datetime="2022-08-29T14:50:27+08:00">2022-08-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%83%E5%AE%87%E5%AE%99/" itemprop="url" rel="index"><span itemprop="name">元宇宙</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    <a title="元宇宙初探：为什么元宇宙还在初期？" href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M1-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%85%83%E5%AE%87%E5%AE%99%E5%9C%A8%E5%88%9D%E6%9C%9F/#SOHUCS" itemprop="discussionUrl">
      <span id="sourceId::48701f260432d8958564f4278ae7ca91" class="cy_cmt_count" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>前一段时间，看到一个数字藏品平台说即将用保证金制度，来保证藏家不会被侵犯利益。</p>
<p>我一瞬间大脑就有个表情包：what？</p>
<p>有没有一点熟悉的味道？</p>
<p>不就和淘宝店铺的保证金一样嘛！</p>
<p>淘宝是什么样的平台？用户的数据全部属于淘宝，用户只能遵守淘宝规则，淘宝对用户有生杀大权……</p>
<p>典型的中心化系统。</p>
<p>如果说在元宇宙里面做软件，或者做平台，或者开公司，却还保持着中心化的思想，可能就很难突破了。</p>
<p>因为元宇宙最大的突破，就是从中心化变成去中心化。</p>
<p>没有去中心化思想，元宇宙是玩不起来的。</p>
<p>至于周边的AR技术，虚拟现实，物联网等等，都是技术上的升级，真正本质的改变是因为成为<strong>去中心化的结构</strong>。</p>
<p>技术的迭代是自然而然的，但是思想的改变，从根深蒂固的中心化思想，到新一代去中心化思想，看来还有很长一段路要走。</p>
<p>如果用现在我们看到的这些平台，来对比元宇宙中要产生的平台，也是很难摆脱中心化的思想的；</p>
<p>所以，我认为，只有可能是元宇宙原生的东西，才能真正成为元宇宙里的东西。</p>
<p>有很多传统企业的老板，说想要进入元宇宙赛道，就会问，我这个行业（比如旅游），怎么在元宇宙赛道做呢？</p>
<p>我觉得用传统行业的方式，思考元宇宙的事情，是摆脱不了思想的限制的，所以想要在元宇宙开辟一片天地，可能就是这两种方式：</p>
<blockquote>
<p>一，完全摆脱传统企业的思维和结构，重新用元宇宙的方式启动一个全新的项目</p>
<p>二，和元宇宙原生的项目和团队合作，得到他们的赋能，让他们带你进入元宇宙的赛道</p>
</blockquote>
<p>而对于又想自己做，又丢不掉过去的传统包袱的，可能就很难了，因为一叶障目，中心化的这个思想，就是会蒙蔽眼睛。</p>
<p>引用张琦的一句话</p>
<blockquote>
<p>旧地图找不到新大陆</p>
</blockquote>
<p>如果要进入元宇宙世界，要学习的有太多了，要丢掉的包袱，那就更多了，真正想要在元宇宙做点事情的，就真的要回到学生时代的精神，假装自己是一张白纸，从头开始认真学习了</p>
<p>今天就放松的随便说点闲话，欢迎交流！</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M2-%E4%BB%80%E4%B9%88%E6%98%AF%E5%85%83%E5%AE%87%E5%AE%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/luwenjuan.jpeg">
      <meta itemprop="name" content="卢文娟">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="卢文娟">
      <meta itemprop="description" content="微信: 13246411679">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 卢文娟">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M2-%E4%BB%80%E4%B9%88%E6%98%AF%E5%85%83%E5%AE%87%E5%AE%99/" class="post-title-link" itemprop="url">元宇宙探秘：什么是元宇宙？（深度探秘）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 15:21:41" itemprop="dateCreated datePublished" datetime="2022-07-02T15:21:41+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-29 14:51:45" itemprop="dateModified" datetime="2022-08-29T14:51:45+08:00">2022-08-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%83%E5%AE%87%E5%AE%99/" itemprop="url" rel="index"><span itemprop="name">元宇宙</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    <a title="元宇宙探秘：什么是元宇宙？（深度探秘）" href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M2-%E4%BB%80%E4%B9%88%E6%98%AF%E5%85%83%E5%AE%87%E5%AE%99/#SOHUCS" itemprop="discussionUrl">
      <span id="sourceId::7341cfb22b17a02803b1834c659aee2d" class="cy_cmt_count" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>继之前的一篇文章【NFT是什么】之后，又有很多人问我，什么是元宇宙？</p>
<p>所以我就尽量使用浅显的语言，深度说明一下：</p>
<h2 id="元宇宙是什么？"><a href="#元宇宙是什么？" class="headerlink" title="元宇宙是什么？"></a>元宇宙是什么？</h2><p>元宇宙和现实宇宙有一个共同点，那就是都是一个完整的世界，区别在于现实宇宙是物理的世界，元宇宙是虚拟的世界。</p>
<p>那有人就说了，互联网也是一个虚拟世界呀！</p>
<p>其实，目前的互联网确实是想要打造一个虚拟世界，但是它发展的方向有些反了。当下的互联网，它是现实世界的虚拟，是从现实世界延伸出来的虚拟世界。</p>
<p>因为是建立在现实世界的基础上，所以<strong>永远都是附属</strong>，无法成为一个完整的世界，反而因为虚拟的特性，出现了信任危机的问题，很多人在互联网带着马甲上蹿下跳，反正可以消号重来。</p>
<p>而元宇宙，它是一个原本就存在的宇宙，不管是我们的神话故事还是游戏，其实都是不成型的元宇宙，而区块链技术的出现，让它的现实化成为可能，互联网信任危机，进一步催化了人们对元宇宙的诉求。</p>
<p>所以，<strong>元宇宙是虚拟世界的现实化。</strong></p>
<p>为什么区块链技术这么牛，能让一个虚拟的宇宙现实化呢？得益于它的几个特性：</p>
<blockquote>
<p><strong>唯一性</strong>：宇宙中所有的东西都是唯一的，这是宇宙的法则，现实宇宙是这样，互联网做不到这样，但元宇宙也可以；</p>
<p><strong>不可篡改性</strong>：宇宙中所有东西，都是不可篡改的，现实宇宙你能接受你家的冰箱莫名其妙空了，而且是被一股神秘力量弄空的吗，不会，否则那不是世界观崩塌了嘛，所有东西都可以追踪的，但互联网就不行，而元宇宙可以；</p>
<p><strong>去中心化</strong>：如果现实宇宙有一个主宰者，今天改一下这个法则，明天改一下那个东西，那也是挺吓人的，正是自然的生长，去中心化是宇宙的法则，而中心化是社会的法则；</p>
<p><strong>可确权</strong>：就是资产是可以追溯的。</p>
</blockquote>
<p>这几个特性，把宇宙的法则蕴含其中，所以元宇宙才能成为一个完整的宇宙。</p>
<p>因为物理宇宙也是有这些特性的：唯一性，不可篡改性，去中心化，可确权性。</p>
<p>这个图你就看一看吧，关于价值回归和信任机制接下来讲，其他暂时没时间解释了。</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16534035951629.png"></p>
<p>目前元宇宙除了有这样的法则作为基石，以及部分人在其中开荒，相对成熟（钱是最重要的东西嘛），比如NFT，FT等等，其他还在发展，大部分还是一片荒芜，等待着创世者在其中创造五彩斑斓的世界。</p>
<p>那么我们接下来就讲一讲元宇宙为我们带来的：价值回归和信任机制，是怎么回事。</p>
<h2 id="元宇宙能给我们带来什么？"><a href="#元宇宙能给我们带来什么？" class="headerlink" title="元宇宙能给我们带来什么？"></a>元宇宙能给我们带来什么？</h2><h3 id="一，价值回归"><a href="#一，价值回归" class="headerlink" title="一，价值回归"></a>一，价值回归</h3><p>越来越多的人，更加重视自身的价值，重视自己产生的价值，应该得到相应的回报。</p>
<p>为了更加清楚地说明，这里举两个例子：</p>
<p><strong>举例一：附加价值</strong></p>
<blockquote>
<p>有一天，我看到一个老师的文章非常好，于是我把他的文章转发给我的一个好友。</p>
<p>我这个好友之前从未听说过这个老师，因为我转发的文章，他认识了这个老师，最后付费报名了这个老师的课程。</p>
<p>好了，请问，我是否应该从中分到一部分利益？</p>
<p>我认为是的，因为在这次交易中，我是产生了客源价值的。但事实上，大部分时候，我们产生的这样的客源价值，是没有得到回报的。</p>
<p>之所以没有得到回报，不是因为这个老师多么资本主义，导致我免费帮他干活，而是因为技术没到位，如果我不说，老师不说，谁知道谁因为我的撮合产生了价值呢？</p>
</blockquote>
<p>所以，这里我也跟你保证，不管你把我的文章发给谁，你截个图给我，将来你分享出去的那个人，他在我这里产生任何消费，我都会给你20%的客源回报，以我为开始，进行价值回归。</p>
<p>有些人说，这不是和分销一样吗，其实有差别，分销是真的在销售，你发给别人的链接就是购买链接，但是这不一样，我保证的是，我的文章都是干货文章，而且产量很高。</p>
<p>你分享给了别人，只是因为别人需要，你给予的是帮助，别人只会感激你的分享；不过你分享的动作，将来产生的附带价值，也是应该属于你的；</p>
<p>不能因为你当初只是想帮助别人，而否定这份帮助产生的附加价值对吧，这样的附加价值可能某天让你得到躺赚的可能。</p>
<p><strong>举例二：用户价值</strong></p>
<blockquote>
<p>你应该知道，有很多内容展示平台，对吧</p>
<p>这些平台本身贡献了平台这样一个场所，让所有内容生产者入驻产生内容，因为他们产生了优质的内容，让平台用户越来越多，让平台用户愿意留下来，让平台估值越来越大。</p>
<p>好了，请问，平台能做到很大的估值和升值，这些内容生产者是否应该分到其中的利益？</p>
<p>是的，因为是他们做出的贡献，让公司有了更高的价值。但事实上，大部分人产生的价值，是没有得到回报的。</p>
</blockquote>
<p>很多用户都没意识到这一点，在免费创作，免费活动，产生用户数据资产，这些资产为平台产出更多价值，这些价值只会输送到少部分人手上。</p>
<p>但是，很多00后已经意识到他们产生的价值，被别人白嫖了，这就是用户资产价值。</p>
<p>这其实就是中心化的组织结构导致的。什么是中心化？数据中心化，权益中心化，利益中心化。</p>
<p>在中心化结构中，所有终端用户的数据，对于这个中心来说，是透明的，不仅是透明的，这些数据还会成为这个中心的资产，用来产生更多利益。</p>
<p>那元宇宙如何做到<strong>价值回归</strong>呢？</p>
<p>其中一大功臣，那就是NFT，NFT是元宇宙的资产，它有重要特性，是唯一性，不可篡改性，可确权性。</p>
<p>正是因为元宇宙NFT的资产确权，这个资产（包括你自己在元宇宙的身份），产生的任何价值，都可以准确回报到你的身上。</p>
<p>这里举例说说是如何准确回报到你的身上的，目前元宇宙有三个领域：</p>
<p><strong>DeFi：金融领域</strong></p>
<p>我们不管是我们自己创造NFT，还是购买NFT资产，这个资产未来产生的增值就是我们自己的，创造者可以享受每次交易的红利，这个是很明确的价值回归，没什么可展开的。</p>
<p><strong>GameFi：活动领域</strong></p>
<p>比如：</p>
<blockquote>
<p>move to earn：走路赚钱，类似StepN<br>learn to earn：学习赚钱，类似LMS<br>sleep to earn：睡觉赚钱，类似Sleep future<br>play to earn：游戏赚钱，类似宝可梦</p>
</blockquote>
<p>我们购买的NFT，在平台活动，为平台产生了价值，会以代币的形式返还给用户。</p>
<p>如果平台发展好，产生增值，那所有在平台活动的，都是价值产生者。代币肯定也是会增值的，这也就是实现了平台用户价值返还给用户的效果。</p>
<p><strong>SocialFi：社交领域</strong></p>
<p>这个领域目前没有什么成熟的平台，都是一些正在酝酿的。</p>
<p>但是，我相信社交领域要实现的，除了用户价值的回归，还会有附加价值的回归。</p>
<p>所以，元宇宙的意义在于，在资产确权之后，让资产所有者受益，让元宇宙居民的劳动产生的价值，都能得到相应的回报。</p>
<h3 id="二，信任机制"><a href="#二，信任机制" class="headerlink" title="二，信任机制"></a>二，信任机制</h3><p>有人说，前面说的那些附加价值，会不会让将来分享泛滥？用户价值，会不会产生很多作弊现象？</p>
<p>当然，如果仅仅是我说的这些，很多人很快会反应过来，这些可能存在的问题。</p>
<p>但是，也许在互联网的世界里，这种问题无法规避，这也是互联网世界无法带来真正的价值回归的原因；</p>
<p>但是在元宇宙的世界里，是可以做到规避的，为什么？</p>
<p>还是因为NFT的重要特性，唯一性，不可篡改性，可确权性。</p>
<p>为了做对比，我们设想分享的两个场景，分别是元宇宙和互联网：</p>
<blockquote>
<p><strong>互联网：</strong></p>
<p>可以分享赚钱了吗？那有何难，我直接群发给所有人，从此这些人产生的消费，我都能拿到分成了，搞起来，反正就是拼概率。</p>
<p>这种行为肯定会导致大家的反感，但是这些人反感，也投诉无门啊，骂我几句，我当没看到就行，实在不行我拉黑他，反正他已经成为我的客源，我就逍遥自在的等着躺赚就行。</p>
<p>如果更多人这样呢，社交就会变得一团乱糟，一个号废了，再换个号继续搞就行，人家也不知道是谁。</p>
<p><strong>元宇宙：</strong></p>
<p>个人身份变成NFT，NFT可确权，你的任何行为，必然要联系到你的钱包，你的NFT身份上。</p>
<p>个人所有行为都会被记录下来，至于你想投诉谁，虽然现在还没有人做这样的功能，但是以目前的技术，实现起来也不难，等socialFi需要的时候自然就实现了。</p>
<p>你如果想换号重来，估计不太可能，你过去的黑历史累累的话，再申请号，你认为会给你洗白吗？</p>
<p>所以，在元宇宙世界，因为技术上的硬实力，大家不得不精心维护自己的社交身份NFT，因为这个东西，可能跟自己未来的很多很多挂钩，教育，社保，保险，贷款等，调取一下你的NFT的记录，你就知道该干嘛不该干嘛了。</p>
<p>甚至，为了让自己记录变得更好，你会做更多帮助别人的事情，这个时候，产生的任何价值都是正面的，社交本身也就变得越来越好。</p>
</blockquote>
<p>看完这个例子，你应该已经知道了，元宇宙凭什么能够建立信任机制了。在现实世界，我们靠面对面的感受和良心驱使，在互联网世界，完全是凭运气，而在元宇宙世界，可以靠技术实现，多好。</p>
<p>良心容易被人性的恶打败，但技术是大公无私的。</p>
<p>而这些技术，则是直接写入智能合约中，强制执行，而且完全透明。</p>
<p>遵守不同智能合约的，会组成不同的DAO，比如一个国家是DAO，一个公司是DAO，一个机构也有DAO，在同一个DAO的，遵守的就是这个DAO定义的法则。</p>
<p>其实就是和现实中一样的，只不过，现实中法则的执行，需要管理部门，职责部门来推进，而且因为是中心化，这些法则其实代表的是领导层的利益，而且领导层可以随意修改，底下的人只有遵守的责任。</p>
<p>但是在元宇宙中，这些法则的执行，是智能合约自动强制执行的，对所有人透明公平，而且不可随意篡改，就算要修改，也是要经过所有人投票表决的。</p>
<p>信任机制靠的就是，计算机执行是铁面无私，对所有人公平透明的。</p>
<h3 id="三，虚拟与现实无限接近"><a href="#三，虚拟与现实无限接近" class="headerlink" title="三，虚拟与现实无限接近"></a>三，虚拟与现实无限接近</h3><p>我们还是看看这几个活动领域的gamefi。</p>
<p>move to earn：走路赚钱，类似StepN<br>learn to earn：学习赚钱，类似LMS<br>sleep to earn：睡觉赚钱，类似Sleep future</p>
<p>其实它实现了虚拟世界个体的活动，到现实世界的映射，什么意思呢？这个我只能跟以前的web2虚拟世界做一下对比：</p>
<blockquote>
<p>在web2互联网中，就是现在的我们，玩了网络游戏之后，比如，玩王者，哪怕我们打游戏打到再高级别，都不会映射到现实世界中的我们自己</p>
<p>不会因为在游戏中我是王者，现实我就能成为王者，有可能现实就是个屌丝。</p>
<p>但是元宇宙的GameFi，它实现的就是更加真实的映射，这里只说更加，不是完全。</p>
<p>比如走路赚钱，我们走了很多路升级了，现实中我们也发生了变化也升级了，因为我们经常锻炼，身体变得更健康，当然附带赚钱了（这个属性不应该是主要的，应该只是初期要增加人气的一些福利吧）</p>
<p>比如学习赚钱，我们学习了升级了，现实中我们也升级了，因为我们学到了更多知识，其他的也是一样。</p>
</blockquote>
<p>当然目前因为在早期，体验感没有更加真实，后期增加VR虚拟现实之后，体验必然会更好。</p>
<p>而且目前虽然看起来很赚钱的样子，但是活动的意义不在于钱，钱只是激励，慢慢的，钱的额度会变小，总额会受限，起到激励就行，重点还是活动本身。</p>
<p>可能后面和物联网关联起来以后，体验会更加真实，两者会更加接近。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M3-%E5%85%83%E5%AE%87%E5%AE%99%E8%A7%86%E9%A2%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/luwenjuan.jpeg">
      <meta itemprop="name" content="卢文娟">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="卢文娟">
      <meta itemprop="description" content="微信: 13246411679">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 卢文娟">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M3-%E5%85%83%E5%AE%87%E5%AE%99%E8%A7%86%E9%A2%91/" class="post-title-link" itemprop="url">元宇宙初探：元宇宙的短视频平台会是什么样子？</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 15:21:41" itemprop="dateCreated datePublished" datetime="2022-07-02T15:21:41+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-25 18:16:19" itemprop="dateModified" datetime="2022-08-25T18:16:19+08:00">2022-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%83%E5%AE%87%E5%AE%99/" itemprop="url" rel="index"><span itemprop="name">元宇宙</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    <a title="元宇宙初探：元宇宙的短视频平台会是什么样子？" href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M3-%E5%85%83%E5%AE%87%E5%AE%99%E8%A7%86%E9%A2%91/#SOHUCS" itemprop="discussionUrl">
      <span id="sourceId::eb556a5ed9dabf2b369519d07a65edca" class="cy_cmt_count" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>我之前有说过，元宇宙的根本目标是价值回归，也就是让创造价值的人得到价值的回报，你可以看一下这一篇文章：【什么是元宇宙】</p>
<p>这里再展开一下：</p>
<p>先说明哪些人在创造价值，这个其实毫无疑问，<strong>每个人来到世界上都是为了实现自己的价值</strong>。所以，每个人都在创造价值，具体是哪些价值，我可以打几个比方。</p>
<p>例子1：创作者产生的原创价值</p>
<blockquote>
<p>作家，画家，艺术品原创作者等等产生作品的价值，可能是书，杂志文章，绘画，工艺品设计等等；</p>
<p>他们很辛勤的劳作，并产生他们的原创作品来，进入商业世界得到价值变现。</p>
<p>但是这些价值被互联网化，变成数据之后，得到价值回报的很多时候不是原创作者本人，很可能是一个盗版搬运工，原创作者很多时候没有拿到他付出的价值的回报。</p>
</blockquote>
<p>例子2：用户产生的数据价值</p>
<blockquote>
<p>比如，你在电商，视频，社交各种平台注册，你作为他们千万用户中的一位，提供了用户价值（没有这么多用户，他们怎么做到估值那么高，所以估值都是每一个用户价值堆积起来的）</p>
<p>你在平台努力活动，又产生更多数据（元宇宙叫做挖矿），这些数据又成为平台资产，为平台带来更多价值变现；</p>
<p>但是这些数据产生者本人（也就是用户），他们没有拿到他们产生价值得到的回报，平台的增长不会给用户带来利益。</p>
</blockquote>
<p>所以互联网的数据是可以随意复制和篡改的，不可能交易，也是中心化的，互联网产生的所有数据归属于平台。</p>
<p>元宇宙推崇的是：<strong>数据资产化</strong>（数据有资产价值），<strong>去中心化</strong>（数据归属于用户自己）。</p>
<p>原创者本人原创的作品是属于他本人的资产，用户产生的数据也是用户自己的资产，不管有没有价值，有多少价值，数据的版权一定是属于最初生产数据的那个人。</p>
<p>既然是资产，那就是可以交易的，交易后，变成二手资产，而且交易多少次都没问题，就是这么简单。</p>
<p>就像现实世界中，购买了一张桌子，就是属于自己的，还可以卖掉换钱，卖的时候它也是正版，只不过是二手。</p>
<p>但是数字资产化无法在互联网中实现，就是因为互联网无法做到唯一性，不可篡改性，可确权性，所以如果互联网买了一本电子书，你如果再卖出去，就是盗版，根本无法确认你卖的是原版，否则你卖出去，你自己的还在又怎么解释。</p>
<p>但是元宇宙可以做到，而且因为是数字世界，会有更多灵活性，你的资产不管倒多少次，他都是可以确权最初创作的人，所以可以做到在每次交易时，都让原作者收益。</p>
<p>所以在元宇宙世界，要么是原创作者创作的产品在市场交易，要么是用户的数据资产在市场交易。</p>
<p>所以，<strong>如果元宇宙有一个短视频平台，那它会是什么样子的呢？</strong></p>
<p>先确定这个平台的价值在哪里，对，短视频平台的价值就是用户的数据资产。</p>
<p>用户在短视频平台活动，他们产生了很多数据，如果一个短视频平台的用户数量多，它的价值就很大。</p>
<p>先不说它的价值是怎么变现的，因为没必要解释，大家都知道，只要有数据，就有一万种变现方式，参照我们目前的短视频平台就行了。</p>
<p>我只说明它出现的新的东西，那就是在元宇宙中，数据不再属于平台，而是属于他自己，所以，用户为平台贡献的数据资产，产生的这一系列价值是怎样回归到用户身上呢？</p>
<p>其实，有一个平台已经在做这件事了，那就是火箭视频。</p>
<p>这是它的白皮书截图：</p>
<p><img src="http://luwenjuan.luyuedan.com/mweb/16534578864587.png"></p>
<p>我不清楚它能做到什么程度，可能在目前浮躁的条件下，容易被人炒糊淘汰，但是这确实就是价值回归到用户的一种很有效的方式，也是目前gamefi用的方式，说明方向大体是对了，可能还需要更多勇士进去试错改进后，才能得到最终能存活下来的好平台。</p>
<p>火箭视频和所有gamefi使用的方式一样，使用代币的方式，用户在平台活动，就可以产生代币（叫做挖矿，也就是把用户产生的数据资产用代币的形式显化）。</p>
<p>因为在元宇宙生态中，是有代币交易所的，所以代币都是可以在交易所进行交易买卖的，这个时候，代币就可以变现，也就实现了数据资产让数据产生者受益的结果。</p>
<p>如果在理想的情况下，一个运营不那么好的公司，代币自然不好卖，价格也更低，产生的数据资产，变现也更少，这也符合逻辑，因为确实在一个不好的平台上，产生的数据价值确实就没那么大。</p>
<p>如果是一个运营非常好的公司，利润很可观，代币肯定也是更好卖，价格更高，用户产生的数据资产，变现也会更多，这也符合逻辑，因为确实在一个好的平台上，产生的数据价值确实有那么大。</p>
<p>但是这只是理想的情况，事实的情况是，在用户数据资产也能赚钱的情况下，很可能用户贪念一起，产生很多垃圾数据，某些机构贪念一起，产生一些导向性数据，反而让这个市场产生很多泡沫。</p>
<p>实际上没有那么大的价值，却让用户变现了那么大价值，也让一些机构从中牟利，反而欺负起平台了，平台赚不到钱了。</p>
<p>用一句话说，就是<strong>防作弊问题</strong>，防作弊就成为元宇宙数据资产回归用户路上要解决的的<strong>核心问题</strong>，防止刷数据，也是在元宇宙化的趋势下，在一个一个平台尝试试错之后，终将会解决的问题。</p>
<p>比如之前stepn为什么那么火，为什么火了之后他们依然简直只做跑步，不做游泳这些呢？因为他们说了，他们的技术，有信心识别是人在跑步并且做到防作弊，但是别的就没有那么大信心。</p>
<p>一旦某个平台防作弊这个问题做到了，基本你可以相信这个平台，而这只是时间问题，再大量的试错，大量的尝试后，未来这样的平台会越来越多，做得越来越好。</p>
<p>这里再拓展一下，</p>
<p>其实现实世界里的所有应用场景，都可以在元宇宙中寻找一个用户价值归位的模型，并实现出来，实现更大的价值。</p>
<p>只要用户看到自己的价值得到了回报，他们来到你的平台不过是时间问题。</p>
<p>元宇宙不是一次技术革命，否则区块链技术早在08年就出现了，那个时候元宇宙怎么没出现呢，因为那个时候用户还没有这样的需求；</p>
<p>但是在互联网的弊端出现后，新一代用户对于自身价值的更高认识后，对原有中心化结构发起的挑战。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M4-gamifi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/luwenjuan.jpeg">
      <meta itemprop="name" content="卢文娟">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="卢文娟">
      <meta itemprop="description" content="微信: 13246411679">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 卢文娟">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M4-gamifi/" class="post-title-link" itemprop="url">元宇宙初探：对于想玩gamefi玩家的几点忠告</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 15:21:41" itemprop="dateCreated datePublished" datetime="2022-07-02T15:21:41+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-25 18:36:19" itemprop="dateModified" datetime="2022-08-25T18:36:19+08:00">2022-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%83%E5%AE%87%E5%AE%99/" itemprop="url" rel="index"><span itemprop="name">元宇宙</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    <a title="元宇宙初探：对于想玩gamefi玩家的几点忠告" href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M4-gamifi/#SOHUCS" itemprop="discussionUrl">
      <span id="sourceId::d7ec8639f75f87431384f24c9331452b" class="cy_cmt_count" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>随着元宇宙的热门，相应的gamefi也变得火了起来，网络上对于gamefi的说法，褒贬不一。</p>
<h2 id="gamefi是什么"><a href="#gamefi是什么" class="headerlink" title="gamefi是什么"></a>gamefi是什么</h2><p>鉴于我的粉丝很多不是圈内人，这里普及一下gamefi。</p>
<p>其实就是game+defi，也就是游戏加金融属性，也就是带金融属性的游戏，正是因为如此，它有很重要的两大特征。</p>
<h3 id="特征一：游戏特征"><a href="#特征一：游戏特征" class="headerlink" title="特征一：游戏特征"></a>特征一：游戏特征</h3><p>游戏是什么特征？就是可玩性，能够激发用户玩它的兴趣，能让用户的体验感非常好，这样的游戏才是能持续留住用户的。</p>
<h3 id="特征二：金融特征"><a href="#特征二：金融特征" class="headerlink" title="特征二：金融特征"></a>特征二：金融特征</h3><p>这一类游戏一般有激励机制，通过发行代币的方式，在用户玩游戏过程中，给予代币的激励；</p>
<p>然后利用区块链的特征，让代币可以到交易所进行交易，这样金融属性也出现了。</p>
<h3 id="特征三：结合现实"><a href="#特征三：结合现实" class="headerlink" title="特征三：结合现实"></a>特征三：结合现实</h3><p>这个特征是另一项我想增加的，以前互联网的游戏，就算想结合现实，是会受到很多限制的。</p>
<p>但是，虽然现在元宇宙gamefi还是没有很好的结合现实，但我认为未来元宇宙gamefi的趋势就是与现实更加深度的结合。</p>
<p>因为我一直觉得，互联网游戏之所以被人不理解，就是因为，就算在游戏中修炼到王者，在现实中可能依然是屌丝，虚拟和现实没有很深度的结合。</p>
<p>未来的话，可能在元宇宙游戏修炼到一个程度，现实世界的自己也是对应到了这个阶段，这才真正实现虚拟世界现实化，元宇宙游戏成为修炼自己必不可少的工具，虽然现在还没有。</p>
<h2 id="gamefi现状"><a href="#gamefi现状" class="headerlink" title="gamefi现状"></a>gamefi现状</h2><p>虽然我想象中的gamefi是另一个样子，但是现状却是另外一个样子。</p>
<p>从去年的axie崩盘，今年stepn大火之后，要退出中国市场，到前几天pokemoney跑路；</p>
<p>在这个过程中，也很多gamefi项目从火了一把到最终死掉，其实币圈人已经见怪不怪了。</p>
<p>好像gamefi就应该是这样的一茬又一茬的生长周期，确实现状也是这样。</p>
<p>为什么会有这样的情况呢？</p>
<p>因为它的模式就是玩游戏赚钱的模式，部分人来玩游戏可能是为了好玩，不过大部分人玩游戏可能就是要赚钱。</p>
<p>所以基本玩这个都要算一下回本周期，我也看过，一个到两个月是比较常见的。</p>
<p>这里就可以算一个帐：</p>
<blockquote>
<p>如果一个月回本的话：</p>
<p>1块钱一年后就是2的11次方&#x3D;2048元</p>
<p>如果两个月回本的话：</p>
<p>1块钱一年后就是2的6次方&#x3D;64元</p>
</blockquote>
<p>在币圈之外，你无法想象一年翻这么多倍的收益，但是却是圈内很正常的数字。</p>
<p>所以说为什么币圈一天，人间一年，也不无道理，人间一年的金融起伏，在币圈一天内可以领教到，所以不管是赚钱还是亏钱，都是大起大落。</p>
<h2 id="gamefi的可取之处"><a href="#gamefi的可取之处" class="headerlink" title="gamefi的可取之处"></a>gamefi的可取之处</h2><p>虽然很多人吐槽gamefi，但是我认为gamefi是有很大的可取之处的。</p>
<p>我之前讲过，在元宇宙，其实就是数字资产的价值，真正回报到产生数字资产的用户身上，也就是价值回归的一种有效的形式。</p>
<p>比如用户玩游戏，其实产生了数据，过去可能用户产生的数据是商家的，商家免费就得到了，数据产生的巨大价值，也是商家所有。</p>
<p>数字资产价值回报到用户身上，可能就是以代币的形式，只是可能这种游戏回报率和方式用力过猛，让一些人只关注回报，不关注软件本身了，这又成为了一种极端。</p>
<p>从一个极端走到另一个极端，自然会慢慢回归到健康的方式，当时这也是所有人共同正在探讨尝试的，所以它也有它的价值。</p>
<h2 id="gamefi的几点忠告"><a href="#gamefi的几点忠告" class="headerlink" title="gamefi的几点忠告"></a>gamefi的几点忠告</h2><p>虽然我一直觉得gamefi有和现实深度结合的一天，那一天可能就比较好玩，但是现状还是有现状的玩法。</p>
<p><strong>忠告一：一定要去玩输得起的钱</strong></p>
<p>就好像说投资的人一样，要用闲钱投资，玩gamefi也要用闲钱玩。</p>
<p>因为它确实是在一定周期可以赚钱，但如果贪心太大，或者赌性太重，很容易亏。</p>
<p><strong>忠告二：按照规律来玩</strong></p>
<p>其实我们已经清楚的知道，gamefi的周期是很快的，可能别人需要几年才能走完一轮生长收藏，但这里可能只需要一个月。</p>
<p>而gamefi又和经济周期不同，经济周期有轮回，有循环，牛熊转换，但是游戏死了就死了，不会起死回生，有那个钱起死回生一个快死的游戏，还不如起盘一个新的游戏。</p>
<p>所以说要按照规律来，如果你要赚钱，就遵循赚钱的规律，如果你想找一个好玩的游戏，那就好好体验，别想着赚多少钱。</p>
<p>因为如果游戏回本周期一个月，两个月，基本就别想着长期发展了，他们基本就是靠亏钱拉新，而且拉新的产能，是不足以补充消耗的。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M5-%E6%AF%92%E6%95%99%E6%9D%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/luwenjuan.jpeg">
      <meta itemprop="name" content="卢文娟">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="卢文娟">
      <meta itemprop="description" content="微信: 13246411679">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 卢文娟">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M5-%E6%AF%92%E6%95%99%E6%9D%90/" class="post-title-link" itemprop="url">元宇宙初探：如果在元宇宙中发生毒教材事件，会是什么样？</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 15:21:41" itemprop="dateCreated datePublished" datetime="2022-07-02T15:21:41+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-25 18:39:08" itemprop="dateModified" datetime="2022-08-25T18:39:08+08:00">2022-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%83%E5%AE%87%E5%AE%99/" itemprop="url" rel="index"><span itemprop="name">元宇宙</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    <a title="元宇宙初探：如果在元宇宙中发生毒教材事件，会是什么样？" href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M5-%E6%AF%92%E6%95%99%E6%9D%90/#SOHUCS" itemprop="discussionUrl">
      <span id="sourceId::baacf2e73f4257e6f0cb15c3a6897f88" class="cy_cmt_count" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>前段时间的毒教材事件，真的是太过分了，胆子也太大了吧</p>
<p>而且事情过了这么久，具体是谁做了什么操作，根本早就没有了痕迹。</p>
<p>我最近写了很多元宇宙的文章，之前说的是价值回归，在元宇宙中，用户产生的价值能够准备回报到用户自己身上。</p>
<p>其实任何事情都有正反两个方面，价值能回归，其实也是<strong>责任的回归</strong>。</p>
<p>任何人在元宇宙中做的事情，元宇宙也能让相应事情的责任准确回归到这个人身上，每个人将会为自己做的事情负责。</p>
<h2 id="元宇宙是如何做到价值回归，责任回归的？"><a href="#元宇宙是如何做到价值回归，责任回归的？" class="headerlink" title="元宇宙是如何做到价值回归，责任回归的？"></a>元宇宙是如何做到价值回归，责任回归的？</h2><p>元宇宙的底层技术是区块链技术。</p>
<p>我们在文章中经常提到，区块链技术的几大特性是：唯一性，不可篡改性，可确权性，去中心化。</p>
<p>其实它的三大特性唯一性，不可篡改性，可确权性的基础，就是去中心化技术带来的。</p>
<p>这里说的如何做到价值和责任回归，主要是不可篡改性，和可确权性能带来的效果。</p>
<blockquote>
<p><strong>不可篡改</strong>：是指我们在元宇宙中做过的所有动作，你无法进行更改或者删除操作，元宇宙中只有增加的操作，也就是你做过的事情，区块链都会记下，而且不能修改；</p>
</blockquote>
<p>不可篡改性，带来的结果就是，你无法在元宇宙中短时间造虚假人设了，除非你长期造一个人设（那也是你的本事）；但是如果在互联网上，我们可以分分钟造假的证书，假的时间，假装有一个长期的账户。</p>
<blockquote>
<p><strong>可确权</strong>：因为我们在元宇宙中做过的所有动作，都会被区块链记录下来，所以就可以追根溯源，比如一本电子书可以经过N次交易，但是只要一溯源，我们就可以1秒钟知道原作者是谁；</p>
</blockquote>
<p>可确权性，带来的结果就是，你原创的作品带来的价值，可以精准的回报到你身上，你产生的数据，如果产生了价值，也可以精准的回报到你身上，当然，如果你做了坏事，也可以1秒钟追溯到你身上。</p>
<p>这里做到的就是价值回归。</p>
<p>所以，也许在元宇宙，你在做一件事情的时候，就会更加谨慎，哪怕现在看不到它带来的恶果，但是一旦将来产生了恶果，也能准确溯源到你，也许就可以这样说“不是不报，时候未到”。</p>
<p>这里做到的就是责任回归。</p>
<p>而且因为不可篡改性，你只要做过，该留的痕迹就会留下，你无法更改。</p>
<p>当然，我说的是理想的去中心化能做到的事情。如果元宇宙没有一个中心化节点来控制这个事情，理想情况下确实是可以做到这样的。</p>
<p>但是如果还是有中心化的节点，那也许是可以有心的抹去一些东西的，我觉得理想的去中心化，还是不会出现或者很快出现，只不过是有比较大范围的中心化节点。</p>
<p>在小范围去中心化，大范围可能还是可能有中心化（现在是任何一个机构或组织都是中心化）。</p>
<p>所以这个中心化节点是谁掌握就是非常重要的了，这个就说到这里吧。</p>
<h2 id="如果在元宇宙发生毒教材事件，如何让相应的人承担相应责任？"><a href="#如果在元宇宙发生毒教材事件，如何让相应的人承担相应责任？" class="headerlink" title="如果在元宇宙发生毒教材事件，如何让相应的人承担相应责任？"></a>如果在元宇宙发生毒教材事件，如何让相应的人承担相应责任？</h2><p>其实前面说了不可篡改，和可确权，应该就知道，毒教材事件在元宇宙肯定是不会出现了吧。</p>
<p>这里就设想一下编辑教材的场景：</p>
<blockquote>
<p>比如某天在元宇宙启动了一个教材编写的项目</p>
<p>很快这个项目组的人就确认了，都一起加入到这个项目的团队中来，元宇宙中，这样的团队是DAO组织起来的（也就是通过智能合约规范的）</p>
<p>在DAO团队中每一个人，对于教材的编写工作，比如文字工作者，今天写了哪些内容，修改了哪些内容，插图工作者，今天增加了哪些插图，修改了哪些插图，都会在区块链上被记录下来。</p>
<p>只有DAO中的人能够对教材进行操作，如果某位领导想要修改，那也需要加入DAO中进行修改，也就是他的修改会被记录下来，因为任何人会为他的修改负责。</p>
<p>未来有一天，这个教材项目结束，投入使用，一旦发现教材有任何问题，直接可以追溯相关文字或者图片的修改记录，乃至追溯到最初的编辑人员，1秒钟可以溯源找到责任方。</p>
<p>所以在这样的结构下，任何人做修改，做决策，都要考虑后果，惩罚会准确回报到相关的人身上。</p>
</blockquote>
<p>所以我认为在元宇宙，毒教材不会这么猖狂。</p>
<h2 id="价值和责任回归会带来什么好处？"><a href="#价值和责任回归会带来什么好处？" class="headerlink" title="价值和责任回归会带来什么好处？"></a>价值和责任回归会带来什么好处？</h2><p>前面说了这么多，元宇宙的价值回归，责任回归，还会带来什么好处呢？</p>
<p>这里我同样举例子。</p>
<p>首先，可以准确的知道一个人的成就：</p>
<blockquote>
<p>比如，你在元宇宙学习了一个课程，这个课程最后给你颁发了一个证书，这个证书是唯一的，不可篡改的，可确权的，所以会收到大家的认可</p>
<p>比如，你获得的一些荣誉，在现实中，可能你可能多年以后，就忘记了，但是元宇宙不会忘记，荣誉会一直存在于你的钱包</p>
<p>只要一打开你的钱包，里面你得到的相应的有价值的东西，都会分门别类的陈列在里面，而且大家都信任，因为无可造假。</p>
<p>这些都会累积成为你的终身成就</p>
</blockquote>
<p>其次，可以准确的知道一个人的污点：</p>
<blockquote>
<p>比如，你犯了一次交通规则，相应的惩罚也会出现在你的钱包；</p>
<p>甚至，你经常熬夜，也许都会在你的钱包里统计你熬夜的数据；</p>
<p>所以，一打开你的钱包，你的相应降低你价值的东西，也都会分门别类的陈列在里面。</p>
<p>这些都会累积成为你终身的污点</p>
</blockquote>
<p>当然，钱包只有你授权别人才能查看，否则也太可怕了。</p>
<p>这些有什么作用吗？</p>
<p>简直作用太大了。</p>
<p>比如也许招人没有现在这么麻烦了，还要博弈，还要面试，还要临时抱佛脚。公司只需要发布一个招聘，钱包里有哪些成就的人可以参与招聘，算法直接精准匹配，招聘的请求直接精准发到你手上。</p>
<p>比如购买保险，保险公司也许就只需要申请你一部分钱包权限，就可以确认你是否具有购买保险的资格。</p>
<p>比如你可以很快找到能和你合的来的灵魂伴侣，能够一起喝酒谈天的朋友，社交成本会变得很低。</p>
<hr>
<p>最后，这里补充一下：</p>
<p>之前说的元宇宙资产，比如NFT，FT，是可以在元宇宙进行交易的。</p>
<p>而今天说的是另一个东西，有大佬称为的是灵魂勋章（我觉得这个取名简直太传神了，可不就是印在灵魂上的勋章嘛），它技术上也是用NFT的形式，但是它本质是另一种东西，它的作用不在交易，而在积累，它会累积在你的身上，成为终身成就，或者终身污点。</p>
<p>所以，在元宇宙中：</p>
<blockquote>
<p>多积累资产，因为可以换money</p>
</blockquote>
<blockquote>
<p>当然也要多积累勋章，因为会让你更加值钱</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M6-%E5%85%83%E5%AE%87%E5%AE%99DAO/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/luwenjuan.jpeg">
      <meta itemprop="name" content="卢文娟">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="卢文娟">
      <meta itemprop="description" content="微信: 13246411679">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 卢文娟">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M6-%E5%85%83%E5%AE%87%E5%AE%99DAO/" class="post-title-link" itemprop="url">元宇宙探秘：元宇宙的DAO是什么？</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 15:21:41" itemprop="dateCreated datePublished" datetime="2022-07-02T15:21:41+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-08-25 18:45:28" itemprop="dateModified" datetime="2022-08-25T18:45:28+08:00">2022-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%83%E5%AE%87%E5%AE%99/" itemprop="url" rel="index"><span itemprop="name">元宇宙</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    <a title="元宇宙探秘：元宇宙的DAO是什么？" href="/2022/07/02/%E5%85%83%E5%AE%87%E5%AE%99/M6-%E5%85%83%E5%AE%87%E5%AE%99DAO/#SOHUCS" itemprop="discussionUrl">
      <span id="sourceId::2a4634677cba4f2d8d0026095a9a0584" class="cy_cmt_count" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="什么是DAO？"><a href="#什么是DAO？" class="headerlink" title="什么是DAO？"></a>什么是DAO？</h2><p><strong>DAO的定义</strong>：去中心化的自治组织，它是基于区块链核心思想，由达成同一个共识的群体，自发产生的共建，共创，共治，共享的协同行为，衍生出来的组织形态。</p>
<p>是一个完全由参与者控制的，不受任何一个集权主体影响的组织，通过使用公开透明的代码写成的程序进行决策，且整个财务交易记录和程序都会被保存在区块链上。</p>
<p>因为区块链是透明的，大家都是可以看到的，所以能起到监督的作用。</p>
<p>这样的自治组织是非常强大的，因为不依赖于集权，所以也不会受制于集权，因为它就是自运转的，同时也可以自成长，哪怕拿掉一部分，它依然能够自我修复。</p>
<p>为什么这里说DAO呢？因为在web3元宇宙的世界，不管是企业，还是机构，都将采用DAO的自组织结构，所以企业家尤其要开始了解DAO。</p>
<h2 id="web1，web2，web3（元宇宙）组织结构区别"><a href="#web1，web2，web3（元宇宙）组织结构区别" class="headerlink" title="web1，web2，web3（元宇宙）组织结构区别"></a>web1，web2，web3（元宇宙）组织结构区别</h2><p><strong>web1结构</strong>：</p>
<p>在web1时代，是门户网站的时代，网站以静态网页的形式保存在一个中央的服务器。</p>
<p>用户的电脑只能去浏览网页的内容，但是却不能和网页进行交互，也就是说，用户是被动接受网站上的内容，没有参与内容管理和创作的权利。</p>
<p><strong>web2结构</strong>：</p>
<p>在web2时代，是互联网时代，用户和网站之间可以进行交互，用户和用户之间，也可以通过网站进行交互。</p>
<p>所以这个时代，大家可以在网络上展示自己，并和世界各地的用户做朋友，让空间不再限制我们的视野。</p>
<p>这个时代，就孕育出提供平台的巨头，我们的数据和创作都归平台所拥有，我们的行动，也受平台制约，命运也和平台紧紧联系。</p>
<p>也就是说，组织结构是中心化结构。</p>
<p><strong>web3结构</strong>：</p>
<p>在web3时代，也就是元宇宙时代，一切虚拟世界的数据实现资产化，并回归到用户手里，我们像在物理宇宙的规则一样，在元宇宙生活。</p>
<p>我们创造的价值，会得到回报，当然我们也要为自己的行为负责。</p>
<p>这个时候，组织结构是去中心化的结构。</p>
<h2 id="web2中心化的弊端"><a href="#web2中心化的弊端" class="headerlink" title="web2中心化的弊端"></a>web2中心化的弊端</h2><p><strong>弊端一：你只能遵守平台规则</strong></p>
<p>你是不是经常看到这句话：</p>
<blockquote>
<p>解释权归平台所有</p>
</blockquote>
<p>人家定了一系列规则，你没有反驳的余地，因为解释权归平台所有，是不是很硬气。</p>
<p>你在人家平台，就要按照人家的规则来办事，我们现在都已经默认接受了这一点，那是因为我们适应了这样的无条件顺应别人的规则。</p>
<p><strong>弊端二：数据归平台所有</strong></p>
<p>你有没有经历过经常被电话骚扰，为什么呢？</p>
<p>那是因为我们的数据被卖了呀，被人不经过你的同意就卖了，数据不属于你，而是属于平台。</p>
<p>所以平台和平台之间，就是竞争，就像抢地盘，抢资源一样，抢来了就是自己的。</p>
<p>如果平台竞争失败，消失了，那么用户在平台上产生的数据，因为不属于用户，也会灰飞烟灭。</p>
<p><strong>弊端三：平台掌握你的生杀大权</strong></p>
<p>因为你的数据都属于平台，你的生杀大权掌握在平台手上。</p>
<p>比如平台想要封你的号了，可能不打一声招呼，就封了，于是你在平台积累的一切粉丝，作品，和口碑等等，一夜清零，从头再来。</p>
<p>你发的帖子，你发的文章，一不小心就被删了。</p>
<p>有时候我能看到很多本质的东西，但是不敢写太直白，万一封号怎么办，所以这就是中心化的弊端，一封号，过去的努力都化为泡影，白费了，所以我有时候也不敢说真话。</p>
<p><strong>弊端四：平台控制主宰我们的思想</strong></p>
<p>我们在平台能看到什么，平台希望我们看到什么，这些都是平台主宰的。</p>
<h2 id="web3（元宇宙）去中心化的好处"><a href="#web3（元宇宙）去中心化的好处" class="headerlink" title="web3（元宇宙）去中心化的好处"></a>web3（元宇宙）去中心化的好处</h2><p><strong>好处一：数据资产属于用户</strong></p>
<p>在web3元宇宙世界，是数字资产化的世界，所有的数据都是资产，资产属于用户。</p>
<p>比如，在一个平台上发布的作品，如果平台没有了，你的文章，视频，音乐等等，依然在你的钱包，因为那些属于用户，所以平台倒了不会影响用户的利益。</p>
<p>然后你的这些资产，可以导入另一个平台，继续使用，继续存在。</p>
<p>你在这个平台购买的音乐，你可以在另一个平台上听，而不是平台一倒，买的音乐也没了。</p>
<p>除非所有的区块链节点消失，所有的电脑消失，你的数据才会消失，只要世界上还有电脑，还有一个区块链节点，你的数据资产就存在，就属于你自己。</p>
<p><strong>好处二：数据资产的价值回归到用户</strong></p>
<p>你的资产产生的增值属于你自己，比如你原创的画作，涨价了，交易的时候，你依然受益。</p>
<p>你不想让平台卖个人隐私和数据，那平台就没有权利卖，如果你想出卖你的隐私和数据，那么你可以卖你的隐私和数据。</p>
<p><strong>好处三：身份互通</strong></p>
<p>只要在同一个区域（链），你的身份钱包就可以在这个区域所有地方（平台）通用，你的身份钱包，携带你的所有资产，让你在元宇宙轻松畅游。</p>
<p>因为区块链就是建立在用钱包登陆的共识上，区块链上智能合约的所有操作也都是需要连接钱包的，修改数据的操作还需要钱包签名。</p>
<p>就好像你在中国，用身份证可以在全国使用一样，你不需要换一个省份就要办一张新身份证，你更不需要去一个公司就办一张新身份证。而一旦你需要修改什么，比如取个钱，你也需要签名确认。</p>
<p>而不需要像现在，去一个平台就注册一个账号，重新填写所有信息。</p>
<p><strong>好处四：产品会更好</strong></p>
<p>由于数据回归给用户，所以平台要受益，只有一种途径就是留住用户，而要留住用户，就要真正靠把产品做好；</p>
<p>而在DAO结构下，产品和社区利益相关，所以用户粘性很高，如果社区觉得你的产品好，那他们不愿意你破产，你就不会破产，如果社区都觉得产品很差，那就应该破产，所以产品也会变得更好</p>
<p><strong>好处五：透明自治</strong></p>
<p>你如果捐钱的话，有时候会不会担心项目方不知道把钱用来干什么了呢？</p>
<p>在DAO结构下就没有这种担心了，由于全部财务透明公开，每一笔钱怎么使用，都会在区块链有记录，所以就不担心暗箱操作了。</p>
<h2 id="DAO和道？也许殊途同归"><a href="#DAO和道？也许殊途同归" class="headerlink" title="DAO和道？也许殊途同归"></a>DAO和道？也许殊途同归</h2><p>这是我的一点小小的想法，我发现DAO和道，怎么发音一样。</p>
<p>大自然的道，其实也是去中心化的。</p>
<p>在大自然中，一切是按照道（宇宙的法则）在运行，这个道就是规律，这个规律在历史的进程中，也是自组织，自发展的，它就像设定好的程序的算法一样，公平公正，又不受任何阻碍的在运行着。</p>
<p>试想如果大自然有一个中心化的主宰者，这个主宰者一不高兴了，把你的记忆说删就删，你的朋友说搞没就搞没，你一说错话，就拿雷劈你，删你的号，那你不是很难受？</p>
<p>这是敏敏之中的注定吗，在元宇宙的底层是<strong>DAO</strong>，在物理宇宙的底层是<strong>道</strong>。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">卢文娟</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  




<script class="next-config" data-name="changyan" type="application/json">{"enable":true,"appid":"cywbdqFL8","appkey":"1e0802ef26195d974f4576578a580da3"}</script>
<script src="/js/third-party/comments/changyan.js"></script>

</body>
</html>
